#!/bin/bash

# 1. –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 9.
# 2. –í—ã–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–æ–º–µ—Ä —Ö–æ–¥–∞ –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 9.
# 3. –í–≤–µ–¥—ë–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–∏—Å–ª–æ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Ç 0 –¥–æ 9 –∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –≤–≤–æ–¥ —á–∏—Å–ª–∞. –û—à–∏–±–∫–æ–π —Ç–∞–∫ –∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤–≤–æ–¥ –Ω–µ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–∫—Ä–æ–º–µ —Å–∏–º–≤–æ–ª–∞ q) –∏ —á–∏—Å–µ–ª —Å–æ—Å—Ç–æ—è—â–∏—Ö –∏–∑ –¥–≤—É—Ö –∏ –±–æ–ª–µ–µ —Ü–∏—Ñ—Ä.
# 4. –ï—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ, —Ç–æ —Å–∫—Ä–∏–ø—Ç —Å–æ–æ–±—â–∞–µ—Ç —É–≥–∞–¥–∞–Ω–æ —á–∏—Å–ª–æ –∏–ª–∏ –Ω–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç –∑–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –ø–µ—Ä–≤–æ–º—É —à–∞–≥—É.
# 5. –ò–≥—Ä–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–¥—ë—Ç —Å–∏–º–≤–æ–ª–∞ q, –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞.

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä–∏–ø—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä—ã:

# -–î–æ–ª—é —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö.
# -–î–æ–ª—é –Ω–µ —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö.
# -10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —á–∏—Å–µ–ª —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–≥–∞–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç–æ–º, –ø—Ä–∏ —ç—Ç–æ–º —á–∏—Å–ª–∞ —É–≥–∞–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤—ã–¥–µ–ª—è—é—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º —Ü–≤–µ—Ç–æ–º, –∞ –Ω–µ —É–≥–∞–¥–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –∫—Ä–∞–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º.

RED='\e[31m'
GREEN='\e[32m'
RESET='\e[0m'

declare -i correct_guesses=0
declare -i total_guesses=0
declare -a answers=()

while true; 
do
    number_to_guess=$((RANDOM % 10))
    echo "–®–∞–≥ $((total_guesses + 1))"
    read -p "–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 9 (–∏–ª–∏ 'q' –¥–ª—è –≤—ã—Ö–æ–¥–∞): " answer

    case "${answer}" in
        [0-9])
            if [[ "$answer" -eq "$number_to_guess" ]]; then
                correct_guesses+=1
                number_string="${GREEN}$number_to_guess${RESET}"
                echo -e "${GREEN}–ü—Ä–∞–≤–∏–ª—å–Ω–æ!${RESET} –í—ã —É–≥–∞–¥–∞–ª–∏ —á–∏—Å–ª–æ ${number_string}.üéâ"
            else
                number_string="${RED}$number_to_guess${RESET}"
                echo -e "${RED}–ù–µ–≤–µ—Ä–Ω–æ.${RESET} –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±—ã–ª–æ ${number_string}.üòñ"
            fi

            answers+=(${number_string})
            total_guesses+=1
        ;;
        q)
            echo "–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ!üôÇ"
            exit 0
        ;;
        *)
            echo "–û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 9 –∏–ª–∏ 'q' –¥–ª—è –≤—ã—Ö–æ–¥–∞.üò•"
            continue
        ;;
    esac

    echo -e "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã:"
    let correct_percentage=correct_guesses*100/total_guesses
    let incorrect_percentage=100-correct_percentage

    echo "–£–≥–∞–¥–∞–Ω–æ: $correct_guesses ($correct_percentage%)"
    echo "–ù–µ —É–≥–∞–¥–∞–Ω–æ: $((total_guesses - correct_guesses)) ($incorrect_percentage%)"
    
    if ((${#answers[@]} >= 10))
        then
            echo -e "–ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —á–∏—Å–µ–ª: ${answers[@]: -10} \n"
        else
            echo -e "–ü–æ—Å–ª–µ–¥–Ω–∏–µ ${#answers[@]} —á–∏—Å–µ–ª: ${answers[@]} \n"
    fi
done